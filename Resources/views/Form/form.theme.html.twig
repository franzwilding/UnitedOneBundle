{% extends "form_div_layout.html.twig" %}

{% block form_start -%}
    {% set attr = attr|merge({class: (attr.class|default('') ~ ' ui form')|trim}) %}
    {{- parent() -}}
{%- endblock form_start %}

{%- block form_row -%}
    <div class="field">
        {{- form_label(form) -}}
        {{- form_errors(form) -}}
        {{- form_widget(form) -}}
    </div>
{%- endblock form_row -%}

{%- block submit_widget -%}
    {%- set attr = attr|merge({'class': 'ui primary button'}) -%}
    {{- parent() -}}
{%- endblock submit_widget -%}

{%- block submit_or_delete_widget -%}
    {{ block('submit_widget') }}

    {% if form.parent.vars.data.id %}
        <a class="red ui button" href="{{ united.url('delete') }}">{% trans %}Delete{% endtrans %}</a>
    {% endif %}
    <a class="basic ui button" href="{{ united.url }}">{% trans %}Cancel{% endtrans %}</a>
{%- endblock submit_or_delete_widget -%}

{%- block delete_widget -%}
    {%- set attr = attr|merge({'class': 'ui red button'}) -%}
    {%- set type = type|default('submit') -%}
    {{ block('button_widget') }}
    <a class="basic ui button" href="{{ united.url }}">{% trans %}Cancel{% endtrans %}</a>
{%- endblock delete_widget -%}

{%- block reset_widget -%}
    {%- set attr = attr|merge({'class': 'ui button'}) -%}
    {{- parent() -}}
{%- endblock reset_widget -%}

{%- block choice_widget_expanded -%}
    {% set attr = attr|merge({'class': 'grouped fields'}) %}
    <div {{ block('widget_container_attributes') }}>
        {%- for child in form %}
            <div class="field">
                <div class="ui checkbox">
                    {{- form_widget(child) -}}
                    {{- form_label(child) -}}
                </div>
            </div>
        {% endfor -%}
    </div>
{%- endblock choice_widget_expanded -%}

{%- block united_tags_widget -%}
    <div class="ui segment united-tags"{% if form.vars.prototype is defined %} data-full-name="{{ form.vars.full_name }}"{% endif %}>

        {{ dump(form) }}

        <select{% if form.vars.prototype is defined %} class="search"{% endif %}>
            <option value="">{{ form.vars.name }}</option>
            {% for option in form.vars.select_options %}
                <option value="{{ option.id }}">{{ option }}</option>
            {% endfor %}
        </select>

        <div class="labels">
        {% for entity in data %}
            {% if entity %}
                <div class="ui label">
                    <input type="hidden" name="{{ form.vars.full_name }}[{{ entity.id }}][name]" value="{{ entity.name }}" />
                    {{ entity }}
                    <i class="delete icon"></i>
                </div>
            {% endif %}
        {% endfor %}
        </div>
    </div>
{%- endblock -%}

{%- block united_entity_browser_widget -%}
    <!--div class="ui segment united-entity-browser">

        <button
                class="ui small labeled positive icon button select-entity"
                data-form-full-name="{{ form.vars.full_name }}"
                data-form-multiple="{{ form.vars.multiple }}">
            <i class="add icon"></i>Select
        </button>

        {% for entity in data %}
            <div class="ui label">
                <input type="hidden" name="{{ form.vars.full_name }}" value="{{ entity.id }}" />
                {{ entity }}
                <i class="delete icon"></i>
            </div>
        {% endfor %}
    </div-->
{%- endblock -%}